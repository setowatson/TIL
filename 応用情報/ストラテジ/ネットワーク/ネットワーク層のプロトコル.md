
## **ネットワーク層の主要プロトコル**
| プロトコル | 規格/仕様 | 主な用途・特徴 |
|------------|----------|----------------|
| **IP (Internet Protocol)** | IPv4, IPv6 | データパケットの送信先アドレス指定 |
| **ICMP (Internet Control Message Protocol)** | RFC 792 | エラーメッセージ（ping）や診断 |
| **ARP (Address Resolution Protocol)** | RFC 826 | IPアドレスからMACアドレスを取得 |
| **RARP (Reverse ARP)** | RFC 903 | MACアドレスからIPアドレスを取得 |
| **Routing Protocols** | | 経路選択（ルーティング）を行うプロトコル |
| **RIP (Routing Information Protocol)** | RFC 1058 | 距離ベクトル型のルーティングプロトコル |
| **OSPF (Open Shortest Path First)** | RFC 2328 | リンク状態型のルーティングプロトコル |
| **BGP (Border Gateway Protocol)** | RFC 4271 | インターネットでの経路制御（AS間ルーティング） |

---

## **各プロトコルの詳細**
### **1. IP (Internet Protocol)**
- **IPv4 (Internet Protocol version 4)**:  
  - 32ビットのアドレス（例: 192.168.0.1）。
  - 最大約43億個のユニークなアドレスが利用可能。
  - **アドレスクラス**（A、B、Cなど）でネットワークを分割。
  - **CIDR（Classless Inter-Domain Routing）**方式も利用。
  
- **IPv6 (Internet Protocol version 6)**:  
  - 128ビットのアドレス（例: 2001:0db8:85a3:0000:0000:8a2e:0370:7334）。
  - **IPアドレスの枯渇問題**に対応し、より多くのアドレスを提供。
  - **自動アドレス設定**、**セキュリティ強化**（IPsec）など。

### **2. ICMP (Internet Control Message Protocol)**
- **ICMP**は、**エラーメッセージ**の送受信を行います。
- **ping**コマンドなどで使われる。
  - **Echo Request**と**Echo Reply**で、ネットワークの疎通確認を行う。
- **エラーメッセージ**: ホスト到達不能、ネットワーク到達不能、TTL超過など。

### **3. ARP (Address Resolution Protocol)**
- **ARP**は、**IPアドレス**から対応する**MACアドレス**を取得するためのプロトコル。
- **ARPリクエスト**を送信し、**ARPリプライ**を受け取る。
- **ARPテーブル**に結果をキャッシュしておく。

### **4. RARP (Reverse ARP)**
- **RARP**は、**MACアドレス**から対応する**IPアドレス**を取得するためのプロトコル。
- **DHCP**が普及したため、現在はほとんど使われていない。

### **5. ルーティングプロトコル**
ネットワーク層の重要な機能は、異なるネットワーク間でデータパケットをルーティングすることです。これを実現するために、ルーティングプロトコルが使用されます。

#### **① RIP (Routing Information Protocol)**
- **RIP**は、**距離ベクトル型のルーティングプロトコル**で、最短経路を決定するために**ホップ数**を使用します。
- **最大15ホップ**までのルーティングをサポート（16ホップで無効）。
- **更新間隔**（通常30秒）でルーティングテーブルを更新。
- **古典的なプロトコル**だが、小規模なネットワークに適している。

#### **② OSPF (Open Shortest Path First)**
- **OSPF**は、**リンク状態型のルーティングプロトコル**で、最短経路を**コスト**（帯域幅）を元に選択します。
- **LSA（Link State Advertisement）**に基づいて、ネットワークの状態を全てのルーターに通知。
- **リアルタイムで最適経路**を決定し、動的に経路を変更。
- **大規模ネットワーク**や**複雑な経路設定**に適している。

#### **③ BGP (Border Gateway Protocol)**
- **BGP**は、インターネット上の異なる自律システム（AS）間で経路選択を行うための**経路制御プロトコル**。
- **AS間の経路選択**を行い、**インターネット上の経路情報**を交換。
- **ルートマップ**や**ポリシーに基づいて経路を選択**するため、柔軟でスケーラブル。
- **最も重要なインターネットルーティングプロトコル**。

---

## **試験対策ポイント**
✅ **IPアドレス**（IPv4、IPv6）の理解  
✅ **ICMP**の役割とpingコマンドの使い方（ネットワーク診断）  
✅ **ARP**と**RARP**の使い分け（IP ↔ MACアドレスの解決）  
✅ **ルーティングプロトコル**  
- **RIP**（ホップ数制限、距離ベクトル型）  
- **OSPF**（リンク状態型、コストで経路選択）  
- **BGP**（AS間ルーティング、経路制御）
